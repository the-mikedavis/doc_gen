html lang="en"
  head
    meta charset="utf-8"
    meta http-equiv="X-UA-Compatible" content="IE=edge"
    meta name="viewport" content="width=device-width, initial-scale=1.0"
    title = @view_module.title(@view_template, @conn.assigns)
    link rel="stylesheet" href="https://vjs.zencdn.net/5.8.7/video-js.css"
    link rel="stylesheet" href="#{Routes.static_path(@conn, "/css/app.css")}"
    link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous"

  body
    header
      section.container
        nav role="navigation"
          h1 = @view_module.title(@view_template, @conn.assigns)
          ul
            = if assigns[:current_user] do
              li = link("Dashboard", to: Routes.video_path(@conn, :index))
              li = link("Upload", to: Routes.video_path(@conn, :new))
              li = link("Settings", to: Routes.settings_path(@conn, :index))
              li = link("Admins", to: Routes.user_path(@conn, :index))
              li = link("Tags", to: Routes.tag_path(@conn, :index))
              li = link("Preview", to: Routes.watch_path(@conn, :index))
              li = link("Log out (#{@current_user.username})", to: Routes.session_path(@conn, :delete, @current_user), method: "delete")
            - else
              li = link("Watch", to: Routes.watch_path(@conn, :index))
              li = link("Log in", to: Routes.session_path(@conn, :new))

    main.container role="main"
      p.alert.alert-info role="alert"
        = get_flash(@conn, :info)
      p.alert.alert-danger role="alert"
        = get_flash(@conn, :error)
      = render(@view_module, @view_template, assigns)
      script type="text/javascript" src="#{Routes.static_path(@conn, "/js/app.js")}"
